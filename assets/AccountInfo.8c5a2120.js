var E=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var h=(l,r)=>{var n={};for(var t in l)y.call(l,t)&&r.indexOf(t)<0&&(n[t]=l[t]);if(l!=null&&E)for(var t of E(l))r.indexOf(t)<0&&U.call(l,t)&&(n[t]=l[t]);return n};import{d as _,R as e,p as A,e as B,u as F}from"./vendor.32ae6308.js";import{b as I}from"./blobToBase64.b0516286.js";import{e as R,P as T,w as v,B as s,d as j,D as M}from"./index.dc753515.js";const $=l=>{let r=e.useRef(null),n=A();B(),F();const{authState:t}=l;e.useState(["4","sdf"]);let[u,P]=e.useState(""),[c,N]=e.useState({}),[w,S]=e.useState([]),[d,b]=e.useState(!1);e.useEffect(()=>{t._id&&R.get(`/api/auth/fetch-profile/${t._id}`).then(a=>{if(a.data.user){let f=a.data.user;N(f);const o=f,{_id:H,created_at:L,avatar:O}=o,i=h(o,["_id","created_at","avatar"]);let p=[];for(let m in i)p.push({field:m,icon:"fa-user",value:i[m]?i[m]:null});S(p)}})},[t._id]);const g=()=>e.createElement("div",null,w.map(a=>a.value&&e.createElement("li",{className:"item"},e.createElement("div",{className:"d-flex"},e.createElement("h4",{className:"label"},a.field.toUpperCase(),":"),a.field==="password"?e.createElement("input",{disabled:!0,className:"border-less-input",value:a.value,type:"passwor"}):e.createElement("h4",null,a.value)),e.createElement("div",null,e.createElement("i",{className:"fa fa-pen"})))));function C(){r.current&&r.current.click()}function k(a){I(a.target.files[0],o=>{P(o)})}function D(a){alert("call database")}function x(){return e.createElement(T,{className:"set-password-form",inProp:!0},e.createElement(v,{placeholder:"New Password"}),e.createElement(v,{placeholder:"Confirm Password"}),e.createElement(s,null,"Set Password"))}return e.createElement("div",{className:"container-full px-5 p-relative"},d&&x(),e.createElement(s,{to:`/customer/${n.name}`,type:"link"},"Back to Dashboard"),e.createElement("h1",{className:"t-center"},"MY ACCOUNT"),e.createElement("div",{className:"customer-avatar"},c.avatar?e.createElement("img",{src:j(c.avatar)}):e.createElement("i",{className:"fa fa-user-circle"})),e.createElement("input",{onChange:k,hidden:!0,type:"file",ref:r}),u?e.createElement("div",{className:"center"},e.createElement("div",{className:"preview-avatar"},e.createElement("img",{src:u})),e.createElement(s,{onClick:D,className:"btn-center"},"Upload Photo")):e.createElement(s,{onClick:C,className:"btn-center"},"Add Profile Photo"),e.createElement("ul",null,e.createElement("h5",null,"user information"),g(),e.createElement("li",{className:"item"},e.createElement("div",{className:"d-flex"},e.createElement("h4",{className:"label mr-5"},"Member in Since: "),e.createElement("h4",null,new Date(c.created_at).toDateString()))),e.createElement(M,null),!c.password&&e.createElement("div",{className:"row d-flex align-center"},e.createElement("h4",{className:"mr-5"},"set password to next time log in"),e.createElement(s,{onClick:()=>b(!d)},"Set Password"))),e.createElement("div",null,e.createElement(s,{type:"primary"},"Delete Your Account")))};function Y(l){return{authState:l.authState}}var K=_(Y,{})($);export{K as default};
