var P=Object.defineProperty,G=Object.defineProperties;var $=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,X=Object.prototype.propertyIsEnumerable;var A=(i,d,r)=>d in i?P(i,d,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[d]=r,p=(i,d)=>{for(var r in d||(d={}))q.call(d,r)&&A(i,r,d[r]);if(S)for(var r of S(d))X.call(d,r)&&A(i,r,d[r]);return i},I=(i,d)=>G(i,$(d));import{d as Y,u as z,R as a,r as T}from"./vendor.32ae6308.js";import{g as J,R as g,h as K,B as k,A as h}from"./index.25888adf.js";function w(i,d){let r=[];return i.forEach(o=>{d.indexOf(o.attribute_name)!==-1&&r.push(o)}),r}const Q=i=>d=>{d({type:"REMOVE_ALL_FILTER_VALUE",payload:i})};let b=null;const W=i=>{const d=z(),{category:r,filteredAttributes:o,currentCategorySelected:ee,currentCategoryRoot:te,lastSelectedCategory:_,selectedCatSections:E,expandFilterItems_sectionIds:ae,filterItem_sections_data:u,filters:m,cb:L}=i,[f,B]=a.useState({}),[v,j]=T.exports.useState(["brands"]);a.useState([]),T.exports.useEffect(()=>{let n=[];if(u&&_.id){let e=[];if(E&&E.oneLevel){let t=i.ui_category_info&&i.ui_category_info.find(s=>s.id===E.oneLevel.id);t&&t.filter_items&&(t.default_expand&&(n=[...t.default_expand]),e=w(i.ui_filterItems,[...t.filter_items]))}b=null;let l=[];if(_){let t=i.ui_category_info&&i.ui_category_info.find(s=>s.id===_.id);t&&t.filter_items&&(l=w(i.ui_filterItems,[...t.filter_items]),b=t.filter_items_exclude,t.default_expand&&(n=[...n,...t.default_expand]))}if(e&&e.length>0?(b&&b.length>0&&b.forEach(t=>{let s=e.findIndex(c=>c.attribute_name===t);s!==-1&&e.splice(s,1)}),e.push(...l)):l&&l.length>0&&(e=l),e.forEach(t=>{let s=n.indexOf(t.attribute_name);s!==-1&&(e[s]=I(p({},e[s]),{expand:!0}))}),e){let t=[];for(let s=0;s<e.length;s++){const c=e[s];t.findIndex(H=>H.attribute_name===c.attribute_name)!==-1&&t.push(c)}console.log(t)}d({type:"SET_FILTER_ITEM_SECTIONS",payload:{category_id:_.id,filterItem_sections:e}})}},[_]);function x(n){B({[n.attribute_name]:n.values.length})}function N(n){let e=[...u.filterItem_sections],l=e.findIndex(t=>t.attribute_name===n);l!==-1&&(e[l]=I(p({},e[l]),{expand:!e[l].expand})),d({type:"SET_FILTER_SECTION_TOGGLE_EXPAND",payload:e})}function R(n){let e=[...v],l=-1;for(let t=0;t<e.length;t++)if(e[t]===n){l=t;break}l!==-1?e.splice(l,1):e.push(n),j(e)}function M(n){let e=[...o],l=e.findIndex(t=>t.attribute_name===n.attribute_name);if(l!==-1){let t=e[l],s=t.values.findIndex(c=>c.name===n.name);s!==-1?t.values.splice(s,1):t.values.push({name:n.name,value:n.value})}else e=[...e,{attribute_name:n.attribute_name,name:n.name,values:[{value:n.value,name:n.name}]}];d({type:h.SET_filtered_Attributes,payload:e})}function y(n){let e=[...m.brands],l=e.findIndex(t=>t._id===n._id);l!==-1?e.splice(l,1):e.push(n),d({type:h.ADD_FILTER,payload:{brands:e}})}function F(n,e,l){if(l){let t=[...m.brands],s=t.findIndex(c=>c._id===l);s!==-1&&t.splice(s,1),d({type:h.ADD_FILTER,payload:{brands:t}})}else{let t=[...o];const s=t.findIndex(c=>c.attribute_name===n);if(s!==-1){const c=t[s].values.findIndex(C=>C.name===e);c!==-1&&t[s].values.splice(t[s].values[c],1)}d({type:h.SET_filtered_Attributes,payload:t})}}function O(){function n(e,l){if(o&&o.length>0){let t=o.findIndex(s=>s.attribute_name===e);return t!==-1?o[t].values.findIndex(s=>s.name===l)!==-1:!1}else return!1}return u&&u.filterItem_sections&&u.filterItem_sections.length>0&&u.filterItem_sections.map(e=>e.values&&e.values.length>0&&a.createElement("div",{className:"filter_section--each_section"},a.createElement(g,{onClick:()=>N(e.attribute_name),justify:"between",align:"center",className:"filter_section--header"},a.createElement("h4",{className:"filter_section__title"},e.name.toUpperCase()),a.createElement("div",{className:"collapse_icon"},a.createElement("i",{onClick:()=>N(e.attribute_name),className:["fa",e.expand?"fa-chevron-up":"fa-chevron-down"].join(" ")}))),a.createElement("div",{className:["ml-2 mt-3",e.expand?"show":"hide"].join(" ")},e.values&&e.values.slice(0,f[e.attribute_name]?f[e.attribute_name]:5).map(l=>a.createElement("div",{className:"input_item"},a.createElement("input",{disabled:l.not_available,onChange:t=>M({attribute_name:e.attribute_name,value:l.value,name:l.name}),type:"checkbox",checked:n(e.attribute_name,l.name),name:l._id,id:l.name}),a.createElement("label",{className:l.not_available?"disabled":"",htmlFor:l.name},l.name))),e.values.length>=f[e.attribute_name]?"":e.values.length>6&&a.createElement(k,{type:"text",className:"pl-1 ml-0",onClick:()=>x(e)},"More",a.createElement("span",{className:"ml-2"},e.name[0].toUpperCase()+e.name.slice(1,e.name.length).toLowerCase())))))}function V(n){y(n)}function D(){function n(e){return m.brands?m.brands.findIndex(t=>t._id===e)!==-1:!1}return r.brands&&r.brands.length>0&&a.createElement("div",{className:"filter_section"},a.createElement("div",{className:"filter_section--each_section"},a.createElement(g,{onClick:()=>R("brands"),justify:"between",align:"center",className:"filter_section--header"},a.createElement("h4",{className:"filter_section__title"},"Brands".toUpperCase()),a.createElement("div",{className:"collapse_icon"},a.createElement("i",{className:["fa",v.indexOf("brands")===-1?"fa-chevron-right":"fa-chevron-down"].join(" ")}))),a.createElement("div",{className:["ml-2 mt-3",v.indexOf("brands")===-1?"hide":"show"].join(" ")},a.createElement(g,{className:"brand_search_input_row"},a.createElement("div",{className:"div"},a.createElement(K.Menu,{placeholder:"Search brands...",addonAfter:a.createElement("i",{className:"far fa-search"}),dropdownMenu:r.brands?r.brands:[],handleEnterButton:V}))),r.brands&&r.brands.slice(0,f.brands?f.brands:5).map(e=>a.createElement("div",{className:"input_item"},a.createElement("input",{onChange:l=>y(e),type:"checkbox",checked:n(e._id),name:e._id,id:e.name}),a.createElement("label",{className:e.not_available?"disabled":"",htmlFor:e.name},e.name))),r.brands.length>=f.brands?"":r.brands.length>6&&a.createElement(k,{type:"text",className:"pl-1 ml-0",onClick:()=>x({attribute_name:"brands",values:r.brands?[...r.brands]:[]})},"More",a.createElement("span",{className:"ml-2"},"Brands")))))}function U(){let n=p({},m);n.brands=[],i.removeAllFilteredValue&&i.removeAllFilteredValue({filteredAttributes:[],filters:n})}return a.createElement("div",{className:"product_sidebar"},L(a.createElement("div",{className:"filter_section"},a.createElement("div",{className:"filter_section--each_section filter_section__selected_values"},a.createElement("div",{className:"flex justify-between items-center filter_section--header"},a.createElement("h4",{className:"filter_section__title"},"Filter"),a.createElement("button",{onClick:U,className:["filter_section__title clear-btn",m.brands&&m.brands.length<1&&o.length<1?"disabled":""].join(" ")},"Clear All")),a.createElement("div",{className:["ml-2 mt-3 show selected_filter--list"].join(" ")},o.map(n=>n.values.map(e=>a.createElement("div",{className:"__item"},a.createElement("span",{className:"selected_filter"},e.name),a.createElement("i",{onClick:()=>F(n.attribute_name,e.name,void 0),className:"fa fa-times"}))))),a.createElement("div",{className:["ml-2 show selected_filter--list"].join(" ")},m.brands&&m.brands.length>0&&m.brands.map(n=>a.createElement("div",{className:"__item"},a.createElement("span",{className:"selected_filter"},n.name),a.createElement("i",{onClick:()=>F("","",n._id),className:"fa fa-times"}))))))),D(),a.createElement("div",{className:"filter_section"},O()))};function Z(i){return{filteredAttributes:i.productState.filteredAttributes,filters:i.productState.filters,category:i.productState.category?i.productState.category:{brands:[]},expandFilterItems_sectionIds:i.productState.expandFilterItems_sectionIds,filterItem_sections_data:i.productState.filterItem_sections_data,ui_filterItems:i.appState.ui_filterItems,ui_category_info:i.appState.ui_category_info}}var se=Y(Z,{fetchBrandForCategory:J,removeAllFilteredValue:Q})(W);export{se as F};
