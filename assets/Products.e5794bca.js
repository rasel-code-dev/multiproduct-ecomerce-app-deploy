var A=Object.defineProperty,R=Object.defineProperties;var T=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var W=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var j=(l,r,c)=>r in l?A(l,r,{enumerable:!0,configurable:!0,writable:!0,value:c}):l[r]=c,y=(l,r)=>{for(var c in r||(r={}))W.call(r,c)&&j(l,c,r[c]);if(b)for(var c of b(r))z.call(r,c)&&j(l,c,r[c]);return l},C=(l,r)=>R(l,T(r));import{e as Q,p as G,R as e,L as h}from"./vendor.32ae6308.js";import{q as J}from"./index.2116ed73.js";import{e as p,p as S,I as w,B as F}from"./index.25888adf.js";import{F as K}from"./FilterSidebar.e288caad.js";import{S as U}from"./Spin.62ffa6c2.js";const le=l=>{const r=Q();G();const[c,I]=e.useState(!1),[u,L]=e.useState({}),[d,_]=e.useState([]),[o,q]=e.useState({perPage:5,pageNumber:1}),[N,B]=e.useState({}),[X,D]=e.useState({}),[x,O]=e.useState(0),[g,$]=e.useState({}),[H,E]=e.useState("");let k={},n=J.parse(r.location.search);e.useEffect(async()=>{if(n&&L(n),Object.keys(n).length>0){E("loadStart");const{data:t}=await p.get(`/api/products/filter/?type=${n.type}&id=${n.id}&perPage=${o.perPage}&pageNumber=${o.pageNumber}`);if(E("loaded"),t.hasChild){let s=(await p.get(`/api/products/category-product/${n.id}`)).data.categoryProduct;B(s),I(!1)}else p.get(`/api/products/count/?category_id=${n.id}`).then(a=>{O(a.data.count)}).catch(a=>{console.log(a)}),_(t.products),p.get(`/api/categories/filter-section/${n.id}`).then(a=>{D(a.data.category),I(!0)})}S.map(t=>{if(t.id===n.id){$(t);return}else t.subCategory.map(a=>{if(a.id===n.id){$(t);return}else a.subCategory.map(s=>{s.id===n.id||s.items.map(i=>{if(n.id===i.id){k={name:t.name,id:t.id,subCategory:[C(y({},a),{name:a.name,id:a.id,subCategory:[s]})]},$(k);return}})})})})},[n.slug,r.location.search]),e.useState([{name:"Electronic",id:1},{name:"Computers",id:2}]);let f={};function v(t){S.map(a=>{a.name===t.children||a.subCategory.map(s=>{s.name===t.children?(f=y({},s),S.findIndex(i=>i.id===a.id),r.push(`/products/?type=${f.type}&id=${f.id}&slug=${f.name}`),s.subCategory=[]):s.subCategory.map(i=>{i.name===t.children?(S.findIndex(P=>P.id===a.id),r.push(`/products/?type=${i.type}&id=${i.id}&slug=${i.name}`)):i.items.map(P=>{P.name===t.children})})})})}function M(){E("loadStart"),p.get(`/api/products/filter/?type=${u.type}&id=${u.id}&perPage=${o.perPage}&pageNumber=${o.pageNumber+1}`).then(t=>{t.data.products&&(E("loaded"),q(C(y({},o),{pageNumber:o.pageNumber+1})),_([...d,...t.data.products]))})}return e.createElement("div",null,e.createElement("div",{className:"container"},e.createElement("div",{className:"row filter_top_row"},e.createElement(m,null,e.createElement(m.Item,null,e.createElement("i",{className:"far fa-home-alt"}),e.createElement(h,{to:"/"},"Home")),e.createElement(m.Item,{onClick:v,id:g.id},g.name),g.subCategory&&g.subCategory.map(t=>e.createElement(e.Fragment,null,e.createElement(m.Item,{onClick:v,id:t.id},t.name),t.items&&e.createElement(m.Item,{onClick:v,id:t.id},u.slug)))),e.createElement("h4",null,u.slug),e.createElement("i",{className:"fa fa-sort"})),e.createElement("div",{className:"d-flex row"},e.createElement("div",{className:"col"},c&&e.createElement(K,{queryObject:u})),e.createElement("div",{className:"col product_content"},c&&e.createElement("div",null,e.createElement("h3",null,"Products Fetch ",d.length," of ",x),e.createElement("div",{className:"d-flex product-gallery"},d&&d.length>0?d.map(t=>e.createElement("div",{className:"product"},e.createElement(w,{maxWidth:100,src:"df"}),e.createElement("h5",{className:"product_name"},t.title,"  "),e.createElement("h5",{className:"product_price"},"$",t.price),e.createElement("button",null,"Add To Cart"),e.createElement(h,{to:`/products/${t._id}`},"Details"))):e.createElement("h1",null,"No Products found on Database.")),e.createElement("div",{style:{textAlign:"center"}},H==="loadStart"?e.createElement(U,{size:20}):d.length!==x&&e.createElement(F,{onClick:M},"Load More"))),!c&&e.createElement("div",null,Object.keys(N).map(t=>e.createElement("div",null,e.createElement("div",{className:"product_section_header"},e.createElement("h1",null,t),e.createElement(F,null,e.createElement(h,{to:`/products/?type=category&id=${N[t][0].category_id}&slug=${t}`},"See More"))),e.createElement("div",{className:"d-flex product-gallery"},N[t].map(a=>e.createElement("div",null,e.createElement(w,{maxWidth:100,src:"df"}),e.createElement("h5",null,a.title),e.createElement(h,{to:`/products/${a._id}`},"Details")))))))))))},V=l=>e.createElement("div",{onClick:r=>l.onClick(l),className:"breadcrumb_item"},l.children),m=l=>e.createElement("div",{className:"breadcrumbs"},l.children);m.Item=V;export{le as default};
